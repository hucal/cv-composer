var PI,add_to,array_from_vec3,camera,camera_far,canvas_line,container,controls,ctx_color,ctx_coords,extend,i,j,k,l,len,len1,len2,m,make_line,make_p_line,make_p_point,make_plane,make_point,max,obj,r2,r2_canvas,r2_resolution,r2_stage,r2_texture,r3_points,ref,ref1,render,renderer,root_objects,s2,s2_points,scene,theta,vec2,vec2_from_array,vec3,vec3_from_array;for(Detector.webgl||Detector.addGetWebGLMessage,container=document.getElementById("vis"),scene=new THREE.Scene,scene.fog=new THREE.FogExp2(16777215,.002),camera_far=1e4,camera=new THREE.PerspectiveCamera(75,container.offsetWidth/container.offsetHeight,.1,camera_far),renderer=new THREE.WebGLRenderer({antialias:!0}),renderer.setSize(container.offsetWidth,container.offsetHeight),renderer.setClearColor(scene.fog.color,1),renderer.setPixelRatio(window.devicePixelRatio),container.appendChild(renderer.domElement),window.addEventListener("resize",function(){return camera.aspect=container.offsetWidth/container.offsetHeight,camera.updateProjectionMatrix(),renderer.setSize(container.offsetWidth,container.offsetHeight)}),r2_canvas=document.createElement("canvas"),r2_resolution=1024,r2_canvas.width=r2_canvas.height=r2_resolution,r2_stage=new createjs.Stage(r2_canvas),ctx_coords=function(e,n){var r,t,o;return r=e instanceof THREE.Vector3||e instanceof THREE.Vector2?[e.x,e.y]:e,t=r[0],o=r[1],n(r2_resolution/2*(t+1),r2_resolution/2*(1-o))},ctx_color=function(e){return e instanceof String||"string"==typeof e?e:"#"+e.toString(16)},canvas_line=function(e,n,r,t){var o;return o=ctx_coords(e,function(e,n){return r2_stage.addChild(new createjs.Shape).set({x:e,y:n})}),ctx_coords(e,function(e,a){return ctx_coords(n,function(n,c){return o.graphics.beginStroke(ctx_color(r)).setStrokeStyle(t).moveTo(0,0).lineTo(n-e,c-a)})}),o},PI=Math.PI,vec2=function(e,n){return new THREE.Vector2(e,n)},vec3=function(e,n,r){return new THREE.Vector3(e,n,r)},array_from_vec3=function(e){return e instanceof THREE.Vector3?[e.x,e.y,e.z]:e},vec3_from_array=function(e){return e instanceof THREE.Vector3?e:vec3(e[0],e[1],e.length>2?e[2]:1)},vec2_from_array=function(e){return e instanceof THREE.Vector2?e:vec2(e[0],e[1])},add_to=function(e,n){return e.push(n),n},s2_points=[],r3_points=[],root_objects=[],extend=function(e,n,r){var t;return null==r&&(r=camera_far),t=e.clone(),e.sub(n),e.setLength(r),e.add(n),n.sub(t),n.setLength(r),n.add(t),[e,n]},make_point=function(e,n,r,t,o){return null==t&&(t=1),null==o&&(o=15),add_to(e,new THREE.Mesh(new THREE.SphereGeometry(n,o,o),new THREE.MeshLambertMaterial({color:r,transparent:1!==t,opacity:t})))},make_plane=function(e,n,r,t){return null==t&&(t=1),add_to(e,new THREE.Mesh(new THREE.PlaneGeometry(n,n),new THREE.MeshBasicMaterial({color:r,side:THREE.DoubleSide,transparent:1!==t,opacity:t})))},make_line=function(e,n,r,t,o,a){var c,i,s,_;return null==o&&(o=1),null==a&&(a=!0),s=vec3_from_array(n),_=vec3_from_array(r),a&&(i=extend(s,_),s=i[0],_=i[1]),c=new THREE.Geometry,c.vertices.push(s,_),add_to(e,new THREE.Line(c,new THREE.LineBasicMaterial({color:t,linewidth:o})))},make_p_point=function(e,n){var r,t,o,a;return e=vec2_from_array(e),r=ctx_coords(e,function(e,n){return r2_stage.addChild(new createjs.Shape).set({x:e,y:n})}),r.graphics.beginFill(ctx_color(n)).drawCircle(0,0,4),t=make_line(r3_points,[-e.x,-e.y,-1],[e.x,e.y,1],n),o=make_point(s2_points,.0075,n),o.position.copy(vec3(e.x,e.y,1).normalize()),a=make_point(s2_points,.0075,n),a.position.copy(vec3(-e.x,-e.y,-1).normalize()),{r2:[r],s2:[o,a],r3:[t]}},make_p_line=function(e,n,r,t,o){var a,c,i,s,_,l,d,m;return null==t&&(t=1),null==o&&(o=!1),l=[vec2_from_array(e),vec2_from_array(n)],e=l[0],n=l[1],s=canvas_line(e,n,r,3),a=c=[],o&&(a=make_p_point(e,r),c=make_p_point(n,r)),_=make_plane(r3_points,3,r,t),d=vec3(e.x,e.y,1),m=vec3(n.x,n.y,1),d.cross(m),d.normalize(),i=d.angleTo(vec3(0,0,1)),_.rotation.setFromQuaternion((new THREE.Quaternion).setFromUnitVectors(vec3(0,0,1),d)),{r2:a.r2.concat(c.r2).concat(s),s2:a.s2.concat(c.s2),r3:a.r3.concat(c.r3).concat([_])}},make_plane(root_objects,2,12320699),s2=make_point(s2_points,1,16777215,.2,90),r2_texture=new THREE.Texture(r2_canvas),r2_texture.needsUpdate=!0,r2=add_to(root_objects,new THREE.Mesh(new THREE.PlaneGeometry(2,2),new THREE.MeshBasicMaterial({side:THREE.DoubleSide,map:r2_texture,transparent:!0}))),r2.position.z=1,max=10,i=j=ref=-max,ref1=max;ref1>=ref?ref1>=j:j>=ref1;i=ref1>=ref?++j:--j)canvas_line([i/max,1],[i/max,-1],2236962,1),canvas_line([1,i/max],[-1,i/max],2236962,1);for(scene.add(new THREE.AmbientLight(4210752)),scene.add(new THREE.HemisphereLight(16777215,4210752,1)),k=0,len=root_objects.length;len>k;k++)obj=root_objects[k],scene.add(obj);for(make_p_point([0,0],16711680),make_p_point([.5,.5],16711680),make_p_line([.2,.2],[-.3,.4],11141375,1,!0),make_p_line([-.2,-.2],[.3,-.3],16711850,1,!0),l=0,len1=s2_points.length;len1>l;l++)obj=s2_points[l],scene.add(obj);for(m=0,len2=r3_points.length;len2>m;m++)obj=r3_points[m],scene.add(obj);r2_stage.update(),camera.position.z=2,theta=3*-PI/4,camera.position.y=3*Math.sin(theta),camera.position.x=3*Math.cos(theta),controls=new THREE.OrbitControls(camera,renderer.domElement),controls.enableDamping=!0,controls.dampingFactor=.1,controls.enablePan=!1,(render=function(){return requestAnimationFrame(render),renderer.render(scene,camera),controls.update()})();
//# sourceMappingURL=vis.min.js.map